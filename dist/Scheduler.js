module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("@mui/material")},function(e,t){e.exports=require("@mui/lab/DatePicker")},function(e,t){e.exports=require("@mui/material/styles")},function(e,t){e.exports=require("@mui/icons-material/NavigateNextRounded")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("@mui/icons-material/NavigateBeforeRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowLeftRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowRightRounded")},function(e,t){e.exports=require("date-fns/locale/en-US")},function(e,t){e.exports=require("@mui/icons-material/MoreVert")},function(e,t){e.exports=require("@mui/lab/AdapterDateFns")},function(e,t){e.exports=require("@mui/lab/LocalizationProvider")},function(e,t){e.exports=require("@mui/icons-material/ClearRounded")},function(e,t){e.exports=require("@mui/icons-material/DeleteRounded")},function(e,t){e.exports=require("@mui/icons-material/EditRounded")},function(e,t){e.exports=require("@mui/icons-material/EventNoteRounded")},function(e,t){e.exports=require("@mui/icons-material/SupervisorAccountRounded")},function(e,t){e.exports=require("@mui/lab/DateTimePicker")},function(e,t){e.exports=require("@mui/icons-material/ExpandMore")},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return He}));var a=n(0),r=n.n(a),o=n(1);const l=(e,t,n)=>{var a;const r=(null===(a=e.config)||void 0===a?void 0:a.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),o=r?t?[t]:[]:t;return{value:o,validity:r?o.length:o}},i=(e,t,n,a)=>{var r;const o=n.idField,l=a.find(e=>e.name===o),i=!!(null===(r=null==l?void 0:l.config)||void 0===r?void 0:r.multiple);let c=[];for(const a of e){const e=i&&!Array.isArray(a[o])?[a[o]]:a[o];(i?e.includes(t[o]):e===t[o])&&c.push(Object.assign(Object.assign({},a),{color:a.color||t[n.colorField||""]}))}return c};var c=n(10),s=n.n(c);const d={height:600,month:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17},week:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17,step:60},day:{startHour:9,endHour:17,step:60},view:"week",selectedDate:new Date,events:[],remoteEvents:void 0,fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceFields:{idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:s.a},u=Object(a.createContext)(Object.assign(Object.assign({},d),{mounted:!1,dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}})),m=(e,t)=>{switch(t.type){case"updateProps":return Object.assign(Object.assign({},e),t.payload);case"set":const{name:n,value:a}=t.payload;return Object.assign(Object.assign({},e),{[n]:a});case"triggerDialog":const r=t.payload.selected;return Object.assign(Object.assign({},e),{dialog:t.payload.status,selectedRange:(null==r?void 0:r.event_id)?null:r,selectedEvent:(null==r?void 0:r.event_id)?r:null});case"triggerLoading":return Object.assign(Object.assign({},e),{loading:t.payload});default:return e}};var p=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const y=e=>{const t=e.view&&e[e.view]?e.view:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(e);return Object.assign(Object.assign({},e),{view:t,dialog:!1,mounted:!1,selectedRange:void 0,fields:[...d.fields,...e.fields||[]]})},f=({initial:e,children:t})=>{const{events:n,resources:i,resourceViewMode:c,month:s,week:d,day:f,fields:g,locale:v,direction:h,loading:b,onEventDrop:O}=e,[j,E]=Object(a.useReducer)(m,y(e)),x=(e,t)=>{E({type:"set",payload:{name:t,value:e}})};Object(a.useEffect)(()=>{j.mounted?E({type:"updateProps",payload:{events:n,resources:i,resourceViewMode:c,month:s,week:d,day:f,fields:g,locale:v,direction:h,loading:b}}):x(!0,"mounted")},[n,i,c,s,d,f,g,v,h,b]);const w=(e,t)=>{let n;n="edit"===t?j.events.map(t=>t.event_id===e.event_id?e:t):[...j.events,e],x(n,"events")},k=()=>(e=>{let t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(j),D=e=>{void 0===b&&E({type:"triggerLoading",payload:e})};return r.a.createElement(u.Provider,{value:Object.assign(Object.assign({},j),{handleState:x,getViews:k,triggerDialog:(e,t)=>{E({type:"triggerDialog",payload:{status:e,selected:t}})},triggerLoading:D,handleGotoDay:e=>{const t=k();t.includes("day")?(x("day","view"),x(e,"selectedDate")):t.includes("week")?(x("week","view"),x(e,"selectedDate")):console.warn("No Day/Week views available")},confirmEvent:w,onDrop:(e,t,n,a)=>p(void 0,void 0,void 0,(function*(){var r;const i=j.events.find(t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e),c=j.fields.find(e=>e.name===n),s=!!(null===(r=null==c?void 0:c.config)||void 0===r?void 0:r.multiple);let d=a;if(c){const e=i[n],r=l(c,e,i).value;if(s)if(r.includes(a)){if(Object(o.isEqual)(i.start,t))return;d=r}else d=r.length>1?[...r,a]:[a]}if(Object(o.isEqual)(i.start,t)&&(!d||!s&&d===i[n]))return;const u=Object(o.differenceInMinutes)(i.end,i.start),m=Object.assign(Object.assign({},i),{start:t,end:Object(o.addMinutes)(t,u),[n]:d||""});if(!O||"function"!=typeof O)return w(m,"edit");try{D(!0);const e=yield O(t,m,i);e&&w(e,"edit")}finally{D(!1)}}))})},t)};var g=n(2),v=n(11),h=n.n(v);const b=()=>Object(a.useContext)(u);var O=n(3),j=n.n(O),E=n(7),x=n.n(E),w=n(5),k=n.n(w);const D=({type:e,onClick:t,tooltip:n})=>{const{direction:a}=b();let o=k.a;return"prev"===e?o="rtl"===a?k.a:x.a:"next"===e&&(o="rtl"===a?x.a:k.a),r.a.createElement(g.Tooltip,{title:n,describeChild:!0},r.a.createElement(g.IconButton,{style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()}},r.a.createElement(o,null)))};var C=n(12),M=n.n(C),_=n(13),T=n.n(_);var S=({children:e})=>{const{locale:t}=b();return r.a.createElement(T.a,{dateAdapter:M.a,locale:t},e)};const I=({selectedDate:e,onChange:t})=>{const{locale:n}=b(),[l,i]=Object(a.useState)(!1),c=()=>i(!l);return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{type:"prev",onClick:()=>{const n=Object(o.addDays)(e,-1);t(n,"selectedDate")},tooltip:"Previous day"}),r.a.createElement(S,null,r.a.createElement(j.a,{open:l,onClose:c,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>r.a.createElement(g.Button,{ref:t.inputRef,style:{padding:4},onClick:c},""+Object(o.format)(e,"dd, MMMM yyyy",{locale:n}))})),r.a.createElement(D,{type:"next",onClick:()=>{const n=Object(o.addDays)(e,1);t(n,"selectedDate")},tooltip:"Next day"}))},F=({selectedDate:e,onChange:t})=>{const{locale:n}=b(),[l,i]=Object(a.useState)(!1),c=Object(o.getMonth)(e),s=()=>i(!l);return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{type:"prev",onClick:()=>{const n=c-1;t(Object(o.setMonth)(e,n),"selectedDate")},tooltip:"Previous month"}),r.a.createElement(S,null,r.a.createElement(j.a,{open:l,onClose:s,openTo:"month",views:["year","month"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>r.a.createElement(g.Button,{ref:t.inputRef,style:{padding:4},onClick:s},Object(o.format)(e,"MMMM yyyy",{locale:n}))})),r.a.createElement(D,{type:"next",onClick:()=>{const n=c+1;t(Object(o.setMonth)(e,n),"selectedDate")},tooltip:"Next month"}))},P=({selectedDate:e,onChange:t,weekProps:n})=>{const{locale:l}=b(),[i,c]=Object(a.useState)(!1),{weekStartOn:s}=n,d=Object(o.startOfWeek)(e,{weekStartsOn:s}),u=Object(o.endOfWeek)(e,{weekStartsOn:s}),m=()=>c(!i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{type:"prev",onClick:()=>{const e=Object(o.addDays)(d,-1);t(e,"selectedDate")},tooltip:"Previous week"}),r.a.createElement(S,null,r.a.createElement(j.a,{open:i,onClose:m,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:e=>r.a.createElement(g.Button,{ref:e.inputRef,style:{padding:4},onClick:m},`${Object(o.format)(d,"dd",{locale:l})} - ${Object(o.format)(u,"dd MMMM yyyy",{locale:l})}`)})),r.a.createElement(D,{type:"next",onClick:()=>{const e=Object(o.addDays)(u,1);t(e,"selectedDate")},tooltip:"Next week"}))},W=()=>{const{selectedDate:e,view:t,week:n,handleState:o,getViews:l}=b(),[i,c]=Object(a.useState)(null),s=Object(g.useTheme)(),d=Object(g.useMediaQuery)(s.breakpoints.up("sm")),u=l(),m=e=>{c(e||null)};return r.a.createElement(g.Toolbar,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("div",null,(()=>{switch(t){case"month":return r.a.createElement(F,{selectedDate:e,onChange:o});case"week":return r.a.createElement(P,{selectedDate:e,onChange:o,weekProps:n});case"day":return r.a.createElement(I,{selectedDate:e,onChange:o});default:return""}})(),r.a.createElement(g.Button,{onClick:()=>o(new Date,"selectedDate")},"Today")),r.a.createElement("div",null,u.length>1&&(d?u.map(e=>r.a.createElement(g.Button,{key:e,color:e===t?"primary":"inherit",onClick:()=>o(e,"view"),onDragOver:t=>{t.preventDefault(),o(e,"view")}},e)):r.a.createElement(a.Fragment,null,r.a.createElement(g.IconButton,{style:{padding:5},onClick:e=>{m(e.currentTarget)}},r.a.createElement(h.a,null)),r.a.createElement(g.Popover,{open:Boolean(i),anchorEl:i,onClose:e=>{m()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(g.MenuList,{autoFocusItem:!!i,disablePadding:!0},u.map(e=>r.a.createElement(g.MenuItem,{key:e,selected:e===t,onClick:()=>{m(),o(e,"view")}},e))))))))};var R=({date:e,onClick:t})=>{const{locale:n}=b();return r.a.createElement("div",null,r.a.createElement(g.Typography,{style:{fontWeight:Object(o.isToday)(e)?"bold":"inherit"},color:Object(o.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},Object(o.format)(e,"dd")),r.a.createElement(g.Typography,{color:Object(o.isToday)(e)?"primary":"inherit",style:{fontWeight:Object(o.isToday)(e)?"bold":"inherit",fontSize:11}},Object(o.format)(e,"eee",{locale:n})))};const B=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:n,resources:o,direction:l,resourceViewMode:i}=b(),{width:c}=function(){const[e,t]=Object(a.useState)({width:0,height:0});return Object(a.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{t(e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e})};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}},[]),e}(),s=e[n.textField],d=e[n.subTextField||""],u=e[n.avatarField||""],m=e[n.colorField||""];if(t instanceof Function)return t(e);const p="tabs"===i?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return r.a.createElement(g.ListItem,{sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===l?"right":"left"},p),component:"span"},r.a.createElement(g.ListItemAvatar,null,r.a.createElement(g.Avatar,{style:{background:m},alt:s,src:u})),r.a.createElement(g.ListItemText,{primary:r.a.createElement(g.Typography,{variant:"body2",noWrap:!0},s),secondary:r.a.createElement(g.Typography,{variant:"caption",color:"textSecondary",noWrap:!0},d),style:{width:c/(o.length+1)}}))};var q=n(4),$=n(6),H=n.n($),z=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function L(e){const{children:t,value:n,index:a}=e,o=z(e,["children","value","index"]);return n===a?r.a.createElement(g.Box,Object.assign({},o),t):r.a.createElement(r.a.Fragment,null)}L.propTypes={children:H.a.node,index:H.a.any.isRequired,value:H.a.any.isRequired};const A=Object(q.styled)("div")(({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px","& button.MuiTab-root":{borderRight:"1px solid #eee"}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}})),N=({tabs:e,variant:t,tab:n,setTab:a,indicator:o,style:l})=>r.a.createElement(A,{style:l},r.a.createElement(g.Tabs,{value:n,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:o}},e.map((e,t)=>{return r.a.createElement(g.Tab,Object.assign({key:e.id||t,label:e.label,value:e.id},{id:"scrollable-auto-tab-"+(n=e.id),"aria-controls":"scrollable-auto-tabpanel-"+n},{onClick:()=>a(e.id),onDragEnter:()=>a(e.id)}));var n})),e.map((e,t)=>e.component&&r.a.createElement(L,{key:t,value:n,index:e.id},e.component)));N.defaultProps={variant:"scrollable",indicator:"primary"};const V=({renderChildren:e})=>{const{resourceViewMode:t}=b();return"tabs"===t?r.a.createElement(K,{renderChildren:e}):r.a.createElement(G,{renderChildren:e})},G=({renderChildren:e})=>{const{resources:t,resourceFields:n}=b();return r.a.createElement(r.a.Fragment,null,t.map((t,a)=>r.a.createElement("div",{key:`${t[n.idField]}_${a}`},r.a.createElement(B,{resource:t}),e(t))))},K=({renderChildren:e})=>{const{resources:t,resourceFields:n,selectedResource:a,handleState:o}=b(),l=t.map(t=>({id:t[n.idField],label:r.a.createElement(B,{resource:t}),component:r.a.createElement(r.a.Fragment,null,e(t))}));return r.a.createElement(N,{tabs:l,tab:a||t[0][n.idField],setTab:e=>{o(e,"selectedResource")},style:{display:"grid"}})};V.defaultProps={span:1};var Q=n(8),X=n.n(Q),Z=n(9),U=n.n(Z),Y=n(14),J=n.n(Y),ee=n(15),te=n.n(ee),ne=n(16),ae=n.n(ne),re=n(17),oe=n.n(re),le=n(18),ie=n.n(le);const ce=Object(q.styled)(g.Box)(({days:e,indent:t="1",theme:n})=>({position:"relative",display:"grid",height:"100%",gridTemplateRows:"0.5fr",gridAutoRows:"1fr",gridTemplateColumns:+t>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,[n.breakpoints.down("sm")]:{gridTemplateColumns:+t>0?`30px repeat(${e}, 1fr)`:""},"&:first-of-type":{borderStyle:"solid",borderColor:n.palette.grey[200],borderWidth:"0 1px 1px 0"}})),se=Object(q.styled)(g.Box,{shouldForwardProp:e=>"today"!==e})(({theme:e,today:t=!1})=>Object.assign(Object.assign({position:"relative",borderColor:e.palette.grey[200],borderWidth:"1px 0px 0px 1px",borderStyle:"solid"},t&&{background:Object(g.alpha)(e.palette.secondary.light,.6)}),{"& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:Object(g.alpha)(e.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}})),de=Object(q.styled)(se,{shouldForwardProp:e=>"today"!==e})(({theme:e,today:t=!1})=>Object.assign(Object.assign({padding:"2px 5px"},!t&&{background:Object(g.alpha)(e.palette.primary.light,.6),"& .MuiTypography-root":{color:e.palette.getContrastText(Object(g.alpha)(e.palette.primary.light,.6))}}),t&&{background:e.palette.secondary.main,"& .MuiTypography-root":{color:e.palette.getContrastText(e.palette.secondary.main)}})),ue=Object(q.styled)(se)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{writingMode:"vertical-rl"},padding:"2px 5px"})),me=Object(q.styled)(g.Box)(()=>({minWidth:400,maxWidth:"95%","& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between"}}}));var pe=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const ye=({event:e,multiday:t,hasPrev:n,hasNext:l,showdate:i})=>{const{triggerDialog:c,onDelete:s,events:d,handleState:u,triggerLoading:m,viewerExtraComponent:p,fields:y,direction:f,resources:v,resourceFields:h,locale:O,viewerTitleComponent:j}=b(),[E,x]=Object(a.useState)(null),[w,k]=Object(a.useState)(!1),D=Object(g.useTheme)(),C="rtl"===f?X.a:U.a,M="rtl"===f?U.a:X.a,_=e=>{!e&&w&&k(!1),x(e||null)},T=()=>pe(void 0,void 0,void 0,(function*(){try{m(!0);let t=e.event_id;if(s){const e=yield s(t);t=e||""}if(t){const e=d.filter(e=>e.event_id!==t);u(e,"events"),_()}}catch(e){console.error(e)}finally{m(!1)}}));let S=r.a.createElement("div",{style:{padding:2}},r.a.createElement(g.Typography,{variant:"subtitle2",style:{fontSize:12},noWrap:!0},e.title),i&&r.a.createElement(g.Typography,{style:{fontSize:11},noWrap:!0},`${Object(o.format)(e.start,"hh:mm a",{locale:O})} - ${Object(o.format)(e.end,"hh:mm a",{locale:O})}`));t&&(S=r.a.createElement("div",{style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(g.Typography,{sx:{fontSize:11},noWrap:!0},n?r.a.createElement(M,{fontSize:"small",sx:{display:"flex"}}):i&&Object(o.format)(e.start,"hh:mm a",{locale:O})),r.a.createElement(g.Typography,{variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},e.title),r.a.createElement(g.Typography,{sx:{fontSize:11},noWrap:!0},l?r.a.createElement(C,{fontSize:"small",sx:{display:"flex"}}):i&&Object(o.format)(e.end,"hh:mm a",{locale:O}))));return r.a.createElement(a.Fragment,null,r.a.createElement(g.Paper,{style:{width:"100%",height:"100%",display:"block",background:e.disabled?D.palette.action.disabled:e.color||D.palette.primary.main,color:e.disabled?D.palette.text.disabled:D.palette.primary.contrastText,cursor:e.disabled?"inherit":"pointer",overflow:"hidden"}},r.a.createElement(g.ButtonBase,{onClick:e=>{e.preventDefault(),e.stopPropagation(),_(e.currentTarget)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"}},r.a.createElement("div",{style:{height:"100%"},draggable:!0,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",""+e.event_id),t.currentTarget.style.backgroundColor=D.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||D.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}},S))),r.a.createElement(g.Popover,{open:Boolean(E),anchorEl:E,onClose:e=>{_()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},(()=>{const t=h.idField,n=v.filter(n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]);return r.a.createElement(me,null,r.a.createElement("div",{style:{background:e.color||D.palette.primary.main,color:D.palette.primary.contrastText}},r.a.createElement("div",{className:"rs__popper_actions"},r.a.createElement("div",null,r.a.createElement(g.IconButton,{size:"small",style:{color:D.palette.primary.contrastText},onClick:()=>{_()}},r.a.createElement(J.a,{color:"disabled"}))),r.a.createElement("div",{style:{display:"inherit"}},r.a.createElement(g.IconButton,{size:"small",style:{color:D.palette.primary.contrastText},onClick:()=>{_(),c(!0,e)}},r.a.createElement(ae.a,null)),!w&&r.a.createElement(g.IconButton,{size:"small",style:{color:D.palette.primary.contrastText},onClick:()=>k(!0)},r.a.createElement(te.a,null)),r.a.createElement(g.Slide,{in:w,direction:"rtl"===f?"right":"left",mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",null,r.a.createElement(g.Button,{style:{color:D.palette.error.main},size:"small",onClick:T},"DELETE"),r.a.createElement(g.Button,{style:{color:D.palette.action.disabled},size:"small",onClick:()=>k(!1)},"CANCEL"))))),j instanceof Function?j(e):r.a.createElement(g.Typography,{style:{padding:"5px 0"},noWrap:!0},e.title)),r.a.createElement("div",{style:{padding:"5px 10px"}},r.a.createElement(g.Typography,{style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},r.a.createElement(oe.a,null)," ",`${Object(o.format)(e.start,"dd MMMM yyyy hh:mm a",{locale:O})} - ${Object(o.format)(e.end,"dd MMMM yyyy hh:mm a",{locale:O})}`),n.length>0&&r.a.createElement(g.Typography,{style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},r.a.createElement(ie.a,null)," ",n.map(e=>e[h.textField]).join(", ")),p instanceof Function?p(y,e):p))})()))};ye.defaultProps={multiday:!1,showdate:!0};var fe=ye;var ge=({todayEvents:e,today:t,startHour:n,step:l,minuteHeight:i,direction:c})=>{const s=[];return r.a.createElement(a.Fragment,null,e.map((a,d)=>{const u=Object(o.differenceInMinutes)(a.end,a.start)*i,m=Object(o.differenceInMinutes)(a.start,Object(o.set)(t,{hours:n,minutes:0,seconds:0})),p=m*i+(m/l+1),y=((e,t)=>e.filter(e=>e.event_id!==t.event_id&&(Object(o.isWithinInterval)(Object(o.addMinutes)(t.start,1),{start:e.start,end:e.end})||Object(o.isWithinInterval)(Object(o.addMinutes)(t.end,-1),{start:e.start,end:e.end})||Object(o.isWithinInterval)(Object(o.addMinutes)(e.start,1),{start:t.start,end:t.end})||Object(o.isWithinInterval)(Object(o.addMinutes)(e.end,-1),{start:t.start,end:t.end}))))(e,a),f=y.filter(e=>s.includes(e.event_id));return s.push(a.event_id),r.a.createElement(g.Paper,{key:a.event_id,className:"rs__event__item",elevation:2,sx:{height:u,top:p,width:y.length?100/(y.length+1)+"%":"95%",["rtl"===c?"right":"left"]:f.length>0?`calc(100%/${f.length+1})`:""}},r.a.createElement(fe,{event:a}))}))};const ve=Object(a.forwardRef)(({start:e,end:t,resourceKey:n,resourceVal:a,children:o},l)=>{const{triggerDialog:i,onDrop:c}=b(),s=Object(g.useTheme)();return r.a.createElement(g.Button,{ref:l,fullWidth:!0,onClick:()=>{i(!0,{start:e,end:t,[n||""]:a})},onDragOver:e=>{e.currentTarget.style.backgroundColor=Object(g.alpha)(s.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=Object(g.alpha)(s.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.currentTarget.style.backgroundColor="";const r=t.dataTransfer.getData("text");c(r,e,n,a)}},o)}),he=Object(a.forwardRef)((e,t)=>{const{triggerDialog:n}=b();return e.cellRenderer?e.cellRenderer({day:e.day,start:e.start,end:e.end,ref:t,onClick:()=>n(!0,{start:e.start,end:e.end})}):r.a.createElement(ve,{start:e.start,end:e.end,ref:t})}),be=e=>{const{direction:t,locale:n,view:l}=b(),i=Object(a.useRef)(null),[c,s]=Object(a.useState)(0),d=Object(a.useMemo)(()=>e.resourcedEvents.filter(t=>Object(o.isSameDay)(e.day,t.start)&&!Object(o.differenceInDays)(t.end,t.start)).sort((e,t)=>e.end.getTime()-t.end.getTime()),[e.resourcedEvents]),u=new Date(`${Object(o.format)(e.day,"yyyy MM dd",{locale:n})}\n\t\t\t ${Object(o.format)(e.hour,"hh:mm a",{locale:n})}`),m=new Date(`${Object(o.format)(e.day,"yyyy MM dd")} ${Object(o.format)(Object(o.addMinutes)(e.hour,e.step),"hh:mm a")}`);return Object(a.useLayoutEffect)(()=>{var t,n;i.current&&0===e.hourIndex&&d.length>0&&s((null===(n=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect())||void 0===n?void 0:n.height)/e.step)},[i.current]),r.a.createElement(se,{today:Object(o.isToday)(e.day)&&"week"===l},0===e.hourIndex&&r.a.createElement(ge,{todayEvents:d,today:e.day,minuteHeight:c,startHour:e.startHour,step:e.step,direction:t}),r.a.createElement(he,Object.assign({},e,{start:u,day:e.day,end:m,ref:i})))},Oe=e=>{const t=e.daysList.map(t=>r.a.createElement(be,Object.assign({},e,{day:t,key:t.toISOString()})));return r.a.createElement(r.a.Fragment,null,t)},je=e=>{const{locale:t}=b(),n=e.hours.map((n,l)=>r.a.createElement(a.Fragment,{key:n.toISOString()},r.a.createElement(ue,null,r.a.createElement(g.Typography,{variant:"caption"},Object(o.format)(n,"hh:mm a",{locale:t}))),r.a.createElement(Oe,Object.assign({},e,{hour:n,hourIndex:l}))));return r.a.createElement(r.a.Fragment,null,n)};var Ee=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const xe=()=>{const{day:e,selectedDate:t,events:n,remoteEvents:l,triggerLoading:c,handleState:s,resources:d,resourceFields:u,fields:m}=b(),{startHour:p,endHour:y,step:f}=e,g=Object(o.setMinutes)(Object(o.setHours)(t,p),0),v=Object(o.setMinutes)(Object(o.setHours)(t,y),0),h=Object(o.eachMinuteOfInterval)({start:g,end:v},{step:f}),O=n.sort((e,t)=>t.end.getTime()-e.end.getTime()),j=Object(a.useCallback)(()=>Ee(void 0,void 0,void 0,(function*(){try{c(!0);const e=Object(o.addDays)(g,-1),t=`?start=${e}&end=${Object(o.addDays)(v,1)}`,n=yield l(t);n&&(null==n?void 0:n.length)&&s(n,"events")}catch(e){throw e}finally{c(!1)}})),[t]);Object(a.useEffect)(()=>{l instanceof Function&&j()},[j]);const E=e=>{let a=O;e&&(a=i(O,e,u,m));const l=28*n.filter(e=>Object(o.differenceInDays)(e.end,e.start)>0&&Object(o.isWithinInterval)(t,{start:Object(o.startOfDay)(e.start),end:Object(o.endOfDay)(e.end)})).length+45;return r.a.createElement(ce,{days:1},r.a.createElement(se,null),r.a.createElement(de,{style:{height:l}},r.a.createElement(R,{date:t}),(e=>{const n=e.filter(e=>Object(o.differenceInDays)(e.end,e.start)>0&&Object(o.isWithinInterval)(t,{start:Object(o.startOfDay)(e.start),end:Object(o.endOfDay)(e.end)}));return r.a.createElement("div",{className:"rs__block_col",style:{height:28*n.length}},n.map((e,n)=>{const a=Object(o.isBefore)(e.start,Object(o.startOfDay)(t)),l=Object(o.isAfter)(e.end,Object(o.endOfDay)(t));return r.a.createElement("div",{key:e.event_id,className:"rs__multi_day",style:{top:28*n,width:"100%"}},r.a.createElement(fe,{event:e,multiday:!0,hasPrev:a,hasNext:l}))}))})(a)),r.a.createElement(je,{daysList:[t],step:f,resourcedEvents:a,startHour:p,hours:h}))};return d.length?r.a.createElement(V,{span:2,renderChildren:E}):E()};var we=n(19),ke=n.n(we);const De=({type:e,value:t,label:n,name:a,onChange:o,variant:l,modalVariant:i,error:c,errMsg:s})=>{const d="date"===e?j.a:ke.a;return r.a.createElement(S,null,r.a.createElement(d,{value:t,label:n,onChange:e=>o(a,new Date(e||"")),minutesStep:5,renderInput:e=>r.a.createElement(g.TextField,Object.assign({variant:l,helperText:c?s:"",error:c,style:{width:"100%"}},e))}))};De.defaultProps={type:"datetime",variant:"outlined",modalVariant:"inline"};const Ce=({variant:e,label:t,placeholder:n,value:o,name:l,required:i,min:c,max:s,email:d,decimal:u,onChange:m,disabled:p,multiline:y,rows:f,touched:v})=>{const[h,b]=Object(a.useState)({touched:!1,valid:!1,errorMsg:""});Object(a.useEffect)(()=>{v&&O(o)},[v]);const O=e=>{let t=e,n=!0,a="";if(d){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,a="Invalid Email"}if(u){n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,a="Only Numbers Allowed"}c&&(""+t).trim().length<c&&(n=!1,a=`Minimum ${c} letters`),s&&(""+t).trim().length>s&&(n=!1,a=`Maximum ${s} letters`),i&&(""+t).trim().length<=0&&(n=!1,a="Required"),b({touched:!0,valid:n,errorMsg:a}),m(l,t,n)};return r.a.createElement(g.TextField,{variant:e,label:t&&r.a.createElement(g.Typography,{variant:"body2"},`${t} ${i?"*":""}`),value:o,name:l,onChange:e=>O(e.target.value),disabled:p,error:h.touched&&!h.valid,helperText:h.touched&&!h.valid&&h.errorMsg,multiline:y,rows:f,style:{width:"100%"},InputProps:{placeholder:n||""}})};Ce.defaultProps={variant:"outlined"};var Me=n(20),_e=n.n(Me);const Te=({options:e,value:t,name:n,required:o,onChange:l,label:i,disabled:c,touched:s,variant:d,loading:u,multiple:m,placeholder:p,errMsg:y})=>{const f=Object(g.useTheme)(),[v,h]=Object(a.useState)({touched:!1,valid:!!t,errorMsg:y||(o?"Required":void 0)});Object(a.useEffect)(()=>{s&&b(t)},[s]);const b=e=>{let t=e,a=!0,r=y;!o||(m?t.length:t)||(a=!1,r="Required"),h(e=>Object.assign(Object.assign({},e),{touched:!0,valid:a,errorMsg:r})),l(n,t,a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.FormControl,{variant:d||"outlined",fullWidth:!0,error:o&&v.touched&&!v.valid,disabled:c},i&&r.a.createElement(g.InputLabel,{id:"input_"+n},r.a.createElement(g.Typography,{variant:"body2"},`${i} ${o?"*":""}`)),r.a.createElement(g.Select,{label:i,labelId:"input_"+n,value:t,onBlur:()=>{v.touched||h(e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:y||e.errorMsg}))},onChange:e=>b(e.target.value),IconComponent:u?()=>r.a.createElement(g.CircularProgress,{size:5}):_e.a,multiple:!!m,classes:{select:"chips"===m?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return r.a.createElement("em",null,i);let n=[];if(m){for(const a of e)t.includes(a.value)&&n.push([a.text]);return"chips"===m?n.map((e,t)=>r.a.createElement(g.Chip,{key:`${e}_${t}`,label:e,style:{margin:"0 2px"},color:"primary"})):n.join(",")}for(const a of e)t===a.value&&n.push([a.text]);return n.join(",")}},p&&r.a.createElement(g.MenuItem,{value:""},r.a.createElement("em",null,p)),e.map(e=>r.a.createElement(g.MenuItem,{value:e.value,key:e.id||e.value},m&&r.a.createElement(g.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text)))),r.a.createElement(g.FormHelperText,{style:{color:f.palette.error.main}},v.touched&&!v.valid&&v.errorMsg))};Te.defaultProps={variant:"outlined"};var Se=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const Ie=(e,t)=>{var n;const a={};for(const r of e){const e=l(r,r.default,t),o=l(r,null==t?void 0:t[r.name],t);a[r.name]={value:o.value||e.value||"",validity:!(null===(n=r.config)||void 0===n?void 0:n.required)||(!!o.validity||!!e.validity),type:r.type,config:r.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},a)};var Fe=()=>{const{fields:e,dialog:t,triggerDialog:n,selectedRange:l,selectedEvent:i,triggerLoading:c,onConfirm:s,customEditor:d,confirmEvent:u,dialogMaxWidth:m}=b(),[p,y]=Object(a.useState)(Ie(e,i||l)),[f,v]=Object(a.useState)(!1),h=Object(g.useTheme)(),O=Object(g.useMediaQuery)(h.breakpoints.down("sm")),j=(e,t,n)=>{y(a=>Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),{value:t,validity:n})}))},E=t=>{t&&y(Ie(e)),n(!1)},x=()=>Se(void 0,void 0,void 0,(function*(){let e={};for(const t in p)if(e[t]=p[t].value,!d&&!p[t].validity)return v(!0);try{c(!0),e.end=e.start>=e.end?Object(o.addMinutes)(e.start,Object(o.differenceInMinutes)(null==l?void 0:l.end,null==l?void 0:l.start)):e.end;const t=(null==i?void 0:i.event_id)?"edit":"create";s?e=yield s(e,t):e.event_id=(null==i?void 0:i.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),u(e,t),E(!0)}catch(e){console.error(e)}finally{c(!1)}}));return r.a.createElement(g.Dialog,{open:t,fullScreen:O,maxWidth:m},(()=>{if(d){return d({state:p,close:()=>n(!1),loading:e=>c(e),edited:i,onConfirm:u})}return r.a.createElement(a.Fragment,null,r.a.createElement(g.DialogTitle,null,i?"Edit Event":"Add Event"),r.a.createElement(g.DialogContent,{style:{overflowX:"hidden"}},r.a.createElement(g.Grid,{container:!0,spacing:1},Object.keys(p).map(t=>{var n;const a=p[t];return r.a.createElement(g.Grid,{item:!0,key:t,sm:null===(n=a.config)||void 0===n?void 0:n.sm,xs:12},(t=>{const n=p[t];switch(n.type){case"input":return r.a.createElement(Ce,Object.assign({value:n.value,name:t,onChange:j,touched:f},n.config));case"date":return r.a.createElement(De,Object.assign({value:n.value,name:t,onChange:(...e)=>j(...e,!0)},n.config));case"select":const a=e.find(e=>e.name===t);return r.a.createElement(Te,Object.assign({value:n.value,name:t,options:(null==a?void 0:a.options)||[],onChange:j,touched:f},n.config));default:return""}})(t))}))),r.a.createElement(g.DialogActions,null,r.a.createElement(g.Button,{color:"inherit",fullWidth:!0,onClick:()=>E()},"Cancel"),r.a.createElement(g.Button,{color:"primary",fullWidth:!0,onClick:x},"Confirm")))})())};var Pe=({events:e,today:t,eachWeekStart:n,daysList:l,onViewMore:i,cellHeight:c})=>{const s=Math.round((c-27)/28-1),d=n.some(e=>Object(o.isSameDay)(e,t))?t:null,u=e.filter(e=>!(!d||!Object(o.isWithinInterval)(d,{start:Object(o.startOfDay)(e.start),end:Object(o.endOfDay)(e.end)}))||Object(o.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime());return r.a.createElement(a.Fragment,null,u.map((a,c)=>{const m=!!d&&Object(o.isBefore)(a.start,d),p=m&&d?d:a.start;let y=Object(o.differenceInDays)(a.end,p)+1;const f=y>=l.length;if(f){const e=Object(o.startOfWeek)(a.start),t=Object(o.closestTo)(e,n);t&&(y=l.length-(d?0:Object(o.differenceInDays)(a.start,t)))}const v=e.filter(e=>!d&&e.event_id!==a.event_id&&s>c&&Object(o.isBefore)(e.start,Object(o.startOfDay)(t))&&Object(o.isAfter)(e.end,Object(o.startOfDay)(t)));let h=c;v.length&&(h+=v.length);const b=28*h+27;return h>s?"":h===s?r.a.createElement(g.Typography,{key:c,width:"100%",className:"rs__multi_day rs__hover__op",style:{top:b,fontSize:11},onClick:e=>{e.stopPropagation(),i(a.start)}},Math.abs(u.length-c)+" More..."):r.a.createElement("div",{key:c,className:"rs__multi_day",style:{top:b,width:100*y+"%"}},r.a.createElement(fe,{event:a,showdate:!1,multiday:Object(o.differenceInDays)(a.end,a.start)>0,hasPrev:m,hasNext:f}))}))},We=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const Re=()=>{const{month:e,selectedDate:t,events:n,handleGotoDay:l,remoteEvents:c,triggerLoading:s,triggerDialog:d,handleState:u,resources:m,resourceFields:p,fields:y,locale:f}=b(),{weekStartOn:v,weekDays:h,startHour:O,endHour:j,cellRenderer:E}=e,x=Object(o.startOfMonth)(t),w=Object(o.endOfMonth)(t),k=Object(o.eachWeekOfInterval)({start:x,end:w},{weekStartsOn:v}),D=h.map(e=>Object(o.addDays)(k[0],e)),C=Object(g.useTheme)(),M=Object(a.useCallback)(()=>We(void 0,void 0,void 0,(function*(){try{s(!0);const e=k[0],t=`?start=${e}&end=${Object(o.addDays)(k[k.length-1],D.length)}`,n=yield c(t);n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{s(!1)}})),[t]);Object(a.useEffect)(()=>{c instanceof Function&&M()},[M]);const _=e=>r.a.createElement(ce,{days:D.length,indent:"0"},D.map((e,t)=>r.a.createElement(de,{key:t},r.a.createElement(g.Typography,{align:"center",variant:"h6"},Object(o.format)(e,"eee",{locale:f})))),(e=>{let c=n;e&&(c=i(n,e,p,y));const s=[];for(const n of k){const i=h.map(i=>{const s=Object(o.addDays)(n,i),u=new Date(""+Object(o.format)(Object(o.setHours)(s,O),"yyyy MM dd hh:mm a")),m=new Date(""+Object(o.format)(Object(o.setHours)(s,j),"yyyy MM dd hh:mm a")),y=p.idField;return r.a.createElement(se,{key:i.toString()},E?E({day:t,start:u,end:m,onClick:()=>d(!0,{start:u,end:m,[y]:e?e[y]:null}),[y]:e?e[y]:null}):r.a.createElement(ve,{start:u,end:m,resourceKey:y,resourceVal:e?e[y]:null}),r.a.createElement(a.Fragment,null,r.a.createElement(g.Avatar,{sx:{width:28,height:28,position:"absolute",top:0,background:Object(o.isToday)(s)?C.palette.secondary.main:"transparent",color:Object(o.isToday)(s)?C.palette.getContrastText(C.palette.secondary.main):C.palette.text.primary,marginBottom:2}},r.a.createElement(g.Typography,{color:Object(o.isSameMonth)(s,x)?"inherit":C.palette.text.disabled,className:"rs__hover__op",onClick:e=>{e.stopPropagation(),l(s)}},Object(o.format)(s,"dd"))),r.a.createElement(Pe,{events:c,today:s,eachWeekStart:k,daysList:D,onViewMore:l,cellHeight:120})))});s.push(r.a.createElement(a.Fragment,{key:n.toString()},i))}return s})(e));return m.length>0?r.a.createElement(V,{renderChildren:_}):_()};var Be=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function l(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((a=a.apply(e,t||[])).next())}))};const qe=()=>{const{week:e,selectedDate:t,events:n,handleGotoDay:l,remoteEvents:c,triggerLoading:s,handleState:d,resources:u,resourceFields:m,fields:p}=b(),{weekStartOn:y,weekDays:f,startHour:v,endHour:h,step:O,cellRenderer:j}=e,E=Object(o.startOfWeek)(t,{weekStartsOn:y}),x=f.map(e=>Object(o.addDays)(E,e)),w=Object(o.startOfDay)(x[0]),k=Object(o.endOfDay)(x[x.length-1]),D=Object(o.setMinutes)(Object(o.setHours)(t,v),0),C=Object(o.setMinutes)(Object(o.setHours)(t,h),0),M=Object(o.eachMinuteOfInterval)({start:D,end:C},{step:O}),_=Object(a.useCallback)(()=>Be(void 0,void 0,void 0,(function*(){try{s(!0);const e=`?start=${w}&end=${k}`,t=yield c(e);Array.isArray(t)&&d(t,"events")}catch(e){throw e}finally{s(!1)}})),[t]);Object(a.useEffect)(()=>{c instanceof Function&&_()},[_]);const T=e=>{let t=n;e&&(t=i(n,e,m,p));const a=28*n.filter(e=>Object(o.differenceInDays)(e.end,e.start)>0&&x.some(t=>Object(o.isWithinInterval)(t,{start:Object(o.startOfDay)(e.start),end:Object(o.endOfDay)(e.end)}))).length+45;return r.a.createElement(ce,{days:x.length},r.a.createElement(se,null),x.map((e,n)=>r.a.createElement(de,{today:Object(o.isToday)(e),key:n,sx:{height:a}},r.a.createElement(R,{date:e,onClick:l}),((e,t)=>{const n=Object(o.isSameDay)(w,t);return e.filter(e=>Object(o.differenceInDays)(e.end,e.start)>0&&x.some(t=>Object(o.isWithinInterval)(t,{start:Object(o.startOfDay)(e.start),end:Object(o.endOfDay)(e.end)}))).filter(e=>Object(o.isBefore)(e.start,w)?n:Object(o.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime()).map((a,l)=>{const i=Object(o.isBefore)(Object(o.startOfDay)(a.start),w),c=Object(o.isAfter)(Object(o.endOfDay)(a.end),k),s=Object(o.differenceInDays)(c?k:a.end,i?w:a.start)+1,d=e.filter(e=>!n&&(e.event_id!==a.event_id&&Object(o.isWithinInterval)(t,{start:e.start,end:e.end})));let u=l;return d.length&&(u+=d.length),r.a.createElement(g.Paper,{key:a.event_id,className:"rs__multi_day",elevation:2,sx:{top:28*u+45,width:100*s+"%"}},r.a.createElement(fe,{event:a,hasPrev:i,hasNext:c,multiday:!0}))})})(t,e))),r.a.createElement(je,{daysList:x,hours:M,resourcedEvents:t,startHour:v,step:O,cellRenderer:j}))};return u.length?r.a.createElement(V,{renderChildren:T}):T()},$e=()=>{const{loading:e,view:t,dialog:n,height:o}=b(),l=Object(a.useMemo)(()=>{switch(t){case"month":return r.a.createElement(Re,null);case"week":return r.a.createElement(qe,null);case"day":return r.a.createElement(xe,null);default:return""}},[t]);return r.a.createElement(g.Box,{sx:{height:o,position:"relative",display:"flex",flexDirection:"column"}},e&&r.a.createElement(g.Box,{sx:{background:e=>e.palette.action.disabledBackground,position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:9,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement(g.CircularProgress,{size:50}),r.a.createElement(g.Typography,{sx:{pt:10},align:"center"},"Loading...")),r.a.createElement(W,null),r.a.createElement(g.Box,{sx:{flexGrow:1,height:o,width:"100%",overflowX:"auto",overflowY:"hidden"}},l),n&&r.a.createElement(Fe,null))},He=e=>r.a.createElement(f,{initial:e},r.a.createElement($e,null));He.defaultProps=d}]);